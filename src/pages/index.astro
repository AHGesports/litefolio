---
import Header from "@/components/Header.astro";
import Hero from "@/components/Hero.astro";
import Layout from "@/layouts/Layout.astro";
import Stack from "@/components/Stack.astro";
import Projects from "@/components/Projects.astro";
import About from "@/components/About.astro";
import Footer from "@/components/Footer.astro";
---

<Layout title="Arshia Hemati - Portfolio">
  <main
    class="relative w-full flex flex-col justify-start pattern"
  >
    <Header />
    <Hero />
    <Stack />
    <Projects />
    <About />
    <Footer />
  </main>
</Layout>

<style>
  .pattern {
    --mouse-x: 50%;
    --mouse-y: 0px;

    background-color: #ffffff;
    background-image: radial-gradient(circle at var(--mouse-x) var(--mouse-y), #f5fdff 70px, white),
      repeating-radial-gradient(
        circle at var(--mouse-x) var(--mouse-y),
        #ffffff,
        #ffffff,
        278px,
        transparent 0,
        #eaeaea 280px
      );
    background-blend-mode: multiply;
    background-size: 100% 100%;
  }
</style>

<script>
  const pattern = document.querySelector('.pattern');

  if (pattern) {
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    if (!prefersReducedMotion) {
      let targetX = 50;
      let targetY = 0;
      let currentX = 50;
      let currentY = 0;
      const ease = 0.08; // Lower = smoother, higher = snappier

      // Track mouse position
      document.addEventListener('mousemove', (e) => {
        targetX = 50 + ((e.clientX / window.innerWidth) - 0.5) * 20;
        targetY = ((e.clientY / window.innerHeight) - 0.5) * 100;
      });

      // Smooth animation loop
      function animate() {
        currentX += (targetX - currentX) * ease;
        currentY += (targetY - currentY) * ease;

        pattern.style.setProperty('--mouse-x', `${currentX}%`);
        pattern.style.setProperty('--mouse-y', `${currentY}px`);

        requestAnimationFrame(animate);
      }

      animate();
    }
  }
</script>
